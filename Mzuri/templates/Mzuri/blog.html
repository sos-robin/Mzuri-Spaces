{% extends 'Mzuri/base.html' %}
{% load static %}
{% block content %}
<head>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <style>
        .blog-section {
            padding: 60px 0;
            background-color: #f9f9f9;
        }

        .section-title {
            text-align: center;
            font-size: 2rem;
            color: #2b7090;
            margin-bottom: 30px;
        }

        .category-filters {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
        }

        .category-filters a {
            padding: 10px 20px;
            background-color: #2b7090;
            color: white;
            border-radius: 5px;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }

        .category-filters a:hover,
        .category-filters a.active {
            background-color: #939434;
        }

        .blog-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 30px;
        }

        .blog-item {
            flex: 1 1 calc(33% - 30px);
            max-width: 31%;
            background-color: #fff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .blog-item:hover {
            transform: scale(1.03);
        }

        .blog-image-container {
            width: 100%;
            height: 200px;
            overflow: hidden;
        }

        .blog-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .blog-content {
            padding: 20px;
            text-align: center;
        }

        .blog-content h3 {
            font-size: 1.4rem;
            color: #98c0c5;
            margin-bottom: 10px;
        }

        .blog-content p {
            font-size: 0.95rem;
            color: #555;
        }

        .blog-content a {
            color: #98c0c5;
            text-decoration: none;
        }

        .blog-content a:hover {
            color: #939434;
        }

        @media (max-width: 768px) {
            .blog-item {
                flex: 1 1 100%;
                max-width: 100%;
            }
        }
    </style>
</head>

<body>
    {% include "Mzuri/navbar.html" %}

    <!-- Hero Start -->
    <div class="slider-area2">
        <div class="slider-height2 hero-overly d-flex align-items-center">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="hero-cap hero-cap2 text-center pt-80">
                            <h2>Our Blog</h2>
                            <p style="color: white;">Read inspiring stories, updates, and tips</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- Blog Section Start -->
        <section class="blog-section">
            <div class="container">
                <h2 class="section-title">Latest Articles</h2>

                <!-- Categories -->
                <div class="category-filters">
                    <a href="{% url 'blog' %}" class="{% if not selected_category %}active{% endif %}">All</a>
                    {% for category in categories %}
                        <a href="{% url 'blog' %}?category={{ category.slug }}" class="{% if selected_category == category.slug %}active{% endif %}">
                            {{ category.name }}
                        </a>
                    {% endfor %}
                </div>

                <!-- Blog Cards -->
                <div class="blog-row">
                    {% for post in blogs %}
                    <div class="blog-item">
                        <a href="{% url 'blog_detail' post.slug %}">
                            <div class="blog-image-container">
                                {% if post.image %}
                                    <img src="{{ post.image.url }}" alt="{{ post.title }}" class="blog-image">
                                {% else %}
                                    <img src="{% static 'Mzuri/img/default_blog.jpg' %}" alt="Default Image" class="blog-image">
                                {% endif %}
                            </div>
                            <div class="blog-content">
                                <h3>{{ post.title }}</h3>
                                <p>{{ post.summary|default:post.content| safe |truncatewords:20 }}</p>
                                <a href="{% url 'blog_detail' post.slug %}" class="btn btn-primary mt-2">Read More</a>
                            </div>
                        </a>
                    </div>
                    {% empty %}
                        <p style="text-align:center; width:100%;">No blog posts found.</p>
                    {% endfor %}
                </div>
            </div>
    </section>
    <!-- Blog Section End -->

    {% include "Mzuri/footer.html" %}
</body>

<script>
    window.onload = function () {
        document.getElementById("preloader-active").style.display = "none";
    };
</script>
{% endblock %}
